{"ast":null,"code":"var _jsxFileName = \"/Users/david/Desktop/David/www/kite/src/components/login/LoginUser.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Link, useLocation, useNavigate, useResolvedPath } from \"react-router-dom\";\n//import { loginUser } from '../../functions/functions';\nimport { LoginContext } from \"../../functions/context/LoginContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst axiosRequest = axios.create({\n  withCredentials: true\n});\nfunction LoginUser() {\n  _s();\n  var loginURL = \"http://localhost:3003/user/login\";\n  const navigate = useNavigate();\n  const {\n    currentUser,\n    setLoginState\n  } = useContext(LoginContext);\n  const [userLoggedIn, setUserLoggedIn] = useState(false);\n  const [userName, setUserName] = useState('davey');\n  const [password, setPassword] = useState('password');\n  const handleChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    if (name == \"username\") {\n      setUserName(value);\n    } else {\n      setPassword(value);\n    }\n  };\n  const handleSubmit = event => {\n    event.preventDefault();\n    console.log(\"logging in \" + userName + \" with password \" + password);\n\n    //STEP 1: Call Login API\n    var userInputName = userName;\n    var userInputPassword = password;\n    console.log(\"you are logging in \" + userInputName + \" with the password \" + userInputPassword);\n    axiosRequest.post(loginURL, {\n      userName: userInputName,\n      password: userInputPassword\n    }).then(function (response) {\n      console.log(response.data);\n      const loginObject = {\n        loginSuccess: loginSuccess,\n        validUser: validUser,\n        passwordCorrect: passwordCorrect,\n        accessToken: accessToken,\n        refreshToken,\n        refreshToken\n      };\n      var loginOutcome = {\n        data: loginObject,\n        success: true,\n        message: userName + \"was sucesfully logged in!\",\n        statusCode: 200,\n        errors: [],\n        currentUser: userName\n      };\n      const loginSuccess = response.data.data.loginSuccess;\n\n      //STEP 2: Success\n      if (loginSuccess == true) {\n        //Step 2A: Set local storage  \n        localStorage.setItem('localStorageCurrentUser', JSON.stringify(userName));\n\n        //Step 2B: Set context\n        setLoginState(userName);\n\n        //Step 2C: Redirect to Groups\n        //navigate(\"/groups\");\n        navigate(\"/profile\");\n      } else {\n        console.log(\"Display error message\");\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"username\",\n        className: \"loginInput\",\n        type: \"text\",\n        value: userName,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        name: \"password\",\n        className: \"loginInput\",\n        type: \"text\",\n        value: password,\n        onChange: handleChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"loginButton\",\n        children: \" Login \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 7\n  }, this);\n}\n_s(LoginUser, \"9mLiyFbqmPHjmz/jQvJmSEWHdrs=\", false, function () {\n  return [useNavigate];\n});\n_c = LoginUser;\nexport default LoginUser;\nvar _c;\n$RefreshReg$(_c, \"LoginUser\");","map":{"version":3,"names":["React","useState","useEffect","useContext","Link","useLocation","useNavigate","useResolvedPath","LoginContext","axios","axiosRequest","create","withCredentials","LoginUser","loginURL","navigate","currentUser","setLoginState","userLoggedIn","setUserLoggedIn","userName","setUserName","password","setPassword","handleChange","event","name","value","target","handleSubmit","preventDefault","console","log","userInputName","userInputPassword","post","then","response","data","loginObject","loginSuccess","validUser","passwordCorrect","accessToken","refreshToken","loginOutcome","success","message","statusCode","errors","localStorage","setItem","JSON","stringify","catch","error"],"sources":["/Users/david/Desktop/David/www/kite/src/components/login/LoginUser.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Link, useLocation, useNavigate, useResolvedPath } from \"react-router-dom\";\n//import { loginUser } from '../../functions/functions';\nimport { LoginContext } from \"../../functions/context/LoginContext\";\nimport axios from \"axios\";\n\nconst axiosRequest = axios.create({\n  withCredentials: true\n})\n\n\nfunction LoginUser() {  \n    var loginURL = \"http://localhost:3003/user/login\"\n    const navigate = useNavigate();\n    const { currentUser, setLoginState} = useContext(LoginContext);\n    const [userLoggedIn, setUserLoggedIn] = useState(false);\n    const [userName, setUserName] = useState('davey')\n    const [password, setPassword] = useState('password')\n\n    const handleChange = (event) => {\n      const { name, value } = event.target\n\n      if(name == \"username\") {\n        setUserName(value)\n      } else {\n        setPassword(value)\n      }\n    }\n\n    const handleSubmit = (event) => {\n        event.preventDefault();\n        console.log(\"logging in \" + userName + \" with password \"  + password)\n        \n        //STEP 1: Call Login API\n        var userInputName = userName\n        var userInputPassword = password\n        console.log(\"you are logging in \" + userInputName + \" with the password \" + userInputPassword)\n    \n        axiosRequest.post(loginURL, {\n          userName: userInputName,\n          password: userInputPassword\n        })\n        .then(function (response) {\n          console.log(response.data);\n          const loginObject = {\n            loginSuccess: loginSuccess,\n            validUser: validUser,\n            passwordCorrect: passwordCorrect,\n            accessToken: accessToken,\n            refreshToken, refreshToken\n          }\n        \n          var loginOutcome = {\n            data: loginObject,\n            success: true,\n            message: userName + \"was sucesfully logged in!\", \n            statusCode: 200,\n            errors: [], \n            currentUser: userName\n          }\n          const loginSuccess = response.data.data.loginSuccess;\n\n          //STEP 2: Success\n          if(loginSuccess == true) {\n            \n            //Step 2A: Set local storage  \n            localStorage.setItem('localStorageCurrentUser', JSON.stringify(userName));\n\n            //Step 2B: Set context\n            setLoginState(userName)\n \n            //Step 2C: Redirect to Groups\n            //navigate(\"/groups\");\n            navigate(\"/profile\");\n\n          } else {\n            console.log(\"Display error message\");\n          }\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n\n    }\n\n    return (\n      <div className = \"login\">\n          <form onSubmit={ handleSubmit }>\n              <input name= \"username\" className=\"loginInput\" type=\"text\" value={ userName } onChange={handleChange} />\n              <input name= \"password\" className=\"loginInput\" type=\"text\" value={ password } onChange={handleChange} />\n              <button type=\"submit\" className=\"loginButton\" > Login </button>\n          </form>\n      </div>\n    );\n  }\n\nexport default LoginUser;\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}