{"ast":null,"code":"var _jsxFileName = \"/Users/david/Desktop/David/www/kite/src/components/posts/actions/EditPost.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = axios.create({});\nasync function editPostAPI(deletePost) {\n  const postURL = \"http://localhost:3003/post/delete/\";\n  const response = await axios.post(postURL, deletePost);\n  console.log(response.data);\n  return response.data;\n}\nconst EditPost = _ref => {\n  _s();\n  let {\n    groupID,\n    currentUser,\n    postID\n  } = _ref;\n  const queryClient = useQueryClient();\n  const handleEditPost = (currentUser, postID) => {\n    var editPost = {\n      postID: postID,\n      currentUser: currentUser\n    };\n    console.log(\"EDIT ME! \");\n    console.log(editPost);\n    //mutate(deletePost) \n  };\n\n  const {\n    isLoading,\n    mutate\n  } = useMutation(editPostAPI, {\n    onSuccess: returnedData => {\n      queryClient.setQueryData(['group-posts', groupID], originalQueryData => {\n        //queryClient.invalidateQueries(['group-posts', groupID]) \n\n        var updatedQueryData = [];\n\n        //STEP 1: Remove post with this ID\n        var deletedPostID = returnedData.data[0].postID;\n        for (let i = 0; i < originalQueryData.length; i++) {\n          if (originalQueryData[i].postID != deletedPostID) {\n            updatedQueryData.push(originalQueryData[i]);\n          }\n        }\n        return updatedQueryData;\n      });\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"\",\n      onClick: () => {\n        handleEditPost(currentUser, postID);\n      },\n      children: \"Edit Me\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 9\n  }, this);\n};\n_s(EditPost, \"sG6dR2SYHBppzfZZ0/U+hBJTR78=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n_c = EditPost;\nexport default EditPost;\n\n/*\n<input type=\"text\" id=\"edit-post\" name=\"edit-post\" value=\"change me!\" />\n//NEED A FORM\n  <form action=\"\">\n                <label for=\"fname\">First name:</label><br>\n                <input type=\"text\" id=\"fname\" name=\"fname\" value=\"John\"><br>\n                <label for=\"lname\">Last name:</label><br>\n                <input type=\"text\" id=\"lname\" name=\"lname\" value=\"Doe\"><br><br>\n                <input type=\"submit\" value=\"Submit\">\n                </form> \n*/\nvar _c;\n$RefreshReg$(_c, \"EditPost\");","map":{"version":3,"names":["React","useState","useMutation","useQueryClient","axios","api","create","editPostAPI","deletePost","postURL","response","post","console","log","data","EditPost","groupID","currentUser","postID","queryClient","handleEditPost","editPost","isLoading","mutate","onSuccess","returnedData","setQueryData","originalQueryData","updatedQueryData","deletedPostID","i","length","push"],"sources":["/Users/david/Desktop/David/www/kite/src/components/posts/actions/EditPost.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\nconst api = axios.create({\n\n})\n\nasync function editPostAPI(deletePost) {\n  const postURL = \"http://localhost:3003/post/delete/\"\n  const response = await axios.post(postURL, deletePost);\n  console.log(response.data)\n\n  return response.data;\n  } \n  \n\nconst EditPost = ({ groupID, currentUser, postID}) => {\n  const queryClient = useQueryClient();\n\n  const handleEditPost = (currentUser, postID) => {\n    var editPost = {\n        postID: postID,\n        currentUser: currentUser   \n    }\n    console.log(\"EDIT ME! \")\n    console.log(editPost)\n    //mutate(deletePost) \n  }\n\n    const { isLoading, mutate } = useMutation(editPostAPI, {\n        onSuccess: (returnedData) => {\n          queryClient.setQueryData(['group-posts', groupID], (originalQueryData) => {\n            //queryClient.invalidateQueries(['group-posts', groupID]) \n\n            var updatedQueryData = [];\n\n            //STEP 1: Remove post with this ID\n            var deletedPostID = returnedData.data[0].postID\n\n            for (let i = 0; i < originalQueryData.length; i++) {\n                if(originalQueryData[i].postID != deletedPostID) {\n                    updatedQueryData.push(originalQueryData[i])\n                }\n            }\n    \n            return updatedQueryData;\n            \n            })    \n        }\n      })\n      \n\n    return (     \n        <div className=\"\">\n            \n            <button type=\"submit\" className = \"\" onClick={() => { handleEditPost(currentUser, postID) }}>Edit Me</button>                 \n        </div>       \n        );\n    }  \n\nexport default EditPost;\n\n/*\n<input type=\"text\" id=\"edit-post\" name=\"edit-post\" value=\"change me!\" />\n//NEED A FORM\n  <form action=\"\">\n                <label for=\"fname\">First name:</label><br>\n                <input type=\"text\" id=\"fname\" name=\"fname\" value=\"John\"><br>\n                <label for=\"lname\">Last name:</label><br>\n                <input type=\"text\" id=\"lname\" name=\"lname\" value=\"Doe\"><br><br>\n                <input type=\"submit\" value=\"Submit\">\n                </form> \n*/\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,EAAEC,cAAc,QAAQ,aAAa;AACzD,OAAOC,KAAK,MAAM,OAAO;AAAA;AAEzB,MAAMC,GAAG,GAAGD,KAAK,CAACE,MAAM,CAAC,CAEzB,CAAC,CAAC;AAEF,eAAeC,WAAW,CAACC,UAAU,EAAE;EACrC,MAAMC,OAAO,GAAG,oCAAoC;EACpD,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACO,IAAI,CAACF,OAAO,EAAED,UAAU,CAAC;EACtDI,OAAO,CAACC,GAAG,CAACH,QAAQ,CAACI,IAAI,CAAC;EAE1B,OAAOJ,QAAQ,CAACI,IAAI;AACpB;AAGF,MAAMC,QAAQ,GAAG,QAAqC;EAAA;EAAA,IAApC;IAAEC,OAAO;IAAEC,WAAW;IAAEC;EAAM,CAAC;EAC/C,MAAMC,WAAW,GAAGhB,cAAc,EAAE;EAEpC,MAAMiB,cAAc,GAAG,CAACH,WAAW,EAAEC,MAAM,KAAK;IAC9C,IAAIG,QAAQ,GAAG;MACXH,MAAM,EAAEA,MAAM;MACdD,WAAW,EAAEA;IACjB,CAAC;IACDL,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;IACxBD,OAAO,CAACC,GAAG,CAACQ,QAAQ,CAAC;IACrB;EACF,CAAC;;EAEC,MAAM;IAAEC,SAAS;IAAEC;EAAO,CAAC,GAAGrB,WAAW,CAACK,WAAW,EAAE;IACnDiB,SAAS,EAAGC,YAAY,IAAK;MAC3BN,WAAW,CAACO,YAAY,CAAC,CAAC,aAAa,EAAEV,OAAO,CAAC,EAAGW,iBAAiB,IAAK;QACxE;;QAEA,IAAIC,gBAAgB,GAAG,EAAE;;QAEzB;QACA,IAAIC,aAAa,GAAGJ,YAAY,CAACX,IAAI,CAAC,CAAC,CAAC,CAACI,MAAM;QAE/C,KAAK,IAAIY,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,iBAAiB,CAACI,MAAM,EAAED,CAAC,EAAE,EAAE;UAC/C,IAAGH,iBAAiB,CAACG,CAAC,CAAC,CAACZ,MAAM,IAAIW,aAAa,EAAE;YAC7CD,gBAAgB,CAACI,IAAI,CAACL,iBAAiB,CAACG,CAAC,CAAC,CAAC;UAC/C;QACJ;QAEA,OAAOF,gBAAgB;MAEvB,CAAC,CAAC;IACN;EACF,CAAC,CAAC;EAGJ,oBACI;IAAK,SAAS,EAAC,EAAE;IAAA,uBAEb;MAAQ,IAAI,EAAC,QAAQ;MAAC,SAAS,EAAG,EAAE;MAAC,OAAO,EAAE,MAAM;QAAER,cAAc,CAACH,WAAW,EAAEC,MAAM,CAAC;MAAC,CAAE;MAAA,UAAC;IAAO;MAAA;MAAA;MAAA;IAAA;EAAS;IAAA;IAAA;IAAA;EAAA,QAC3G;AAEV,CAAC;AAAA,GA1CCH,QAAQ;EAAA,QACQZ,cAAc,EAYFD,WAAW;AAAA;AAAA,KAbvCa,QAAQ;AA4Cd,eAAeA,QAAQ;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAAA"},"metadata":{},"sourceType":"module"}