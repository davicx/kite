{"ast":null,"code":"var _jsxFileName = \"/Users/david/Desktop/David/www/kite/src/components/posts/actions/like/Likes.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios';\nimport LikePost from './LikePost';\nimport UnlikePost from './UnlikePost';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = axios.create({});\nasync function likePostAPI(likedPost) {\n  const postURL = \"http://localhost:3003/post/like\";\n  const response = await axios.post(postURL, likedPost);\n  return response.data;\n}\nconst Likes = props => {\n  _s();\n  const queryClient = useQueryClient();\n  const currentUser = props.currentUser;\n  var post = props.post;\n  console.log(post);\n  const totalLikes = props.post.totalLikes;\n  const postLikes = props.post.postLikesArray;\n  const postUserLikesArray = props.post.likedByUsernameArray;\n  const postID = props.post.postID;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"post\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"post-text\",\n      children: [\"total Likes \", postLikes.length, \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: [\" \", postLikes.map(postLike => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"like-list\",\n        children: [\" \", postLike.likedByUserName, \" \"]\n      }, postLike.postLikeID, true, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 15\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(LikePost, {\n      post: post,\n      currentUser: currentUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n};\n_s(Likes, \"4R+oYVB2Uc11P7bp1KcuhpkfaTw=\", false, function () {\n  return [useQueryClient];\n});\n_c = Likes;\nexport default Likes;\n\n/*\n<Likes post = { post } currentUser = {currentUser}  />   \n<li key = { postLikes.postLikeID }  > { postLikes.likedByName } </li> \n          <ul> { postLikesArray.map((postLikes) => (\n                <li key = { postLikes.likedByName }  > { postLikes.likedByName } </li> \n            ))}</ul>        \n\n<ul> { postLikesArray.map((likedBy) => (\n                <li key = { likedBy}  > { likedBy } </li> \n            ))}</ul>    \n\n\"postLikes\": [\n    {\n        \"postLikeID\": 92,\n        \"postID\": 70,\n        \"likedByName\": \"sam\",\n        \"likedByImage\": \"12.jpg\",\n        \"likedByFirstName\": \"David\",\n        \"likedByLastName\": \"Vasquez\"\n    }\n]*/\n\n//FROM SIMPLE\n/*\nimport React, { useState, useEffect } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\nvar groupID = 72;\n\nconst api = axios.create({\n  \n})\n\nasync function likePostAPI(likedPost) {\n    const postURL = \"http://localhost:3003/api/post/like\"\n    const response = await axios.post(postURL, likedPost);\n\n    return response.data;\n} \n\n\nconst Likes = (props) => {\n    const queryClient = useQueryClient();\n    const currentUser = props.currentUser;\n    const post = props.post;\n\n    const totalLikes = props.post.totalLikes;\n    const postLikesArray = props.post.postLikesArray;\n    const postID = props.post.postID;\n    \n\n    const handleLikePost = (postID, currentUser) => {\n        var likedPost = {\n            postID: postID,\n            likedBy: currentUser   \n        }\n\n        mutate(likedPost)\n        //console.log(currentUser + \" you liked \" + postID)\n    }\n    const { isLoading, mutate } = useMutation(likePostAPI, {\n        onSuccess: (returnedData) => {\n            //queryClient.invalidateQueries(['posts'])\n   \n            queryClient.setQueryData(['group', groupID], (originalQueryData) => {\n                console.log(\"returnedData\")\n                console.log(returnedData)\n                console.log(\"originalQueryData\")\n                console.log(originalQueryData)\n\n                //STEP 1: Get post ID of updated post and new like array \n                const postID = returnedData.postID;\n                const postLikesArray = returnedData.postLikesArray;\n                console.log(\"postID\")\n                console.log(postID)\n                console.log(\"postLikesArray\")\n                console.log(postLikesArray)  \n                var updatedQueryData = structuredClone(originalQueryData);\n\n                for (let i = 0; i < updatedQueryData.length; i++) {\n                    //console.log(updatedQueryData[i].postID + \" \" + postID)\n                    if(updatedQueryData[i].postID == postID) {\n                        console.log(\"Change this post! \" + postID)\n\n                        \n                        //Create the new array of users who have liked this\n                        updatedQueryData[i].postLikesArray = []\n                        updatedQueryData[i].postLikesArray = returnedData.postLikesArray\n                        updatedQueryData[i].totalLikes = returnedData.postLikesArray.length\n\n\n                    }\n                }\n\n                return updatedQueryData;\n                //return [data];\n            })\n        }\n    })\n\n    return (\n        <div className=\"\">\n            <p className = \"post-text\">total Likes { totalLikes } </p>  \n            <ul> { postLikesArray.map((likedBy) => (\n                <li key = { likedBy}  > { likedBy } </li> \n            ))}</ul>\n            { postLikesArray.includes(currentUser) ? \n                <button type=\"submit\" className = \"post-liked\" onClick={() => { handleLikePost(postID, currentUser) }}>Like</button>: \n                <button type=\"submit\" className = \"\" onClick={() => { handleLikePost(postID, currentUser) }}>Like</button>\n            }\n        </div>\n        );\n    } \n  \nexport default Likes;\n*/\n\n//CODE\n/*\nimport React, { useState, useEffect } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\nvar groupID = 72;\n\n\nconst api = axios.create({\n  \n})\n\nasync function likePostAPI(likedPost) {\n    const postURL = \"http://localhost:3003/api/post/like\"\n    const response = await axios.post(postURL, likedPost);\n\n    return response.data;\n} \n\n\nconst Likes = (props) => {\n    const queryClient = useQueryClient();\n    const currentUser = props.currentUser;\n    const post = props.post;\n\n    const totalLikes = props.post.totalLikes;\n    const postLikesArray = props.post.postLikesArray;\n    const postID = props.post.postID;\n    \n\n    const handleLikePost = (postID, currentUser) => {\n        var likedPost = {\n            postID: postID,\n            likedBy: currentUser   \n        }\n\n        mutate(likedPost)\n        //console.log(currentUser + \" you liked \" + postID)\n    }\n    const { isLoading, mutate } = useMutation(likePostAPI, {\n        onSuccess: (returnedData) => {\n            //queryClient.invalidateQueries(['posts'])\n   \n            queryClient.setQueryData(['group', groupID], (originalQueryData) => {\n                console.log(\"returnedData\")\n                console.log(returnedData)\n                console.log(\"originalQueryData\")\n                console.log(originalQueryData)\n\n                //STEP 1: Get post ID of updated post and new like array \n                const postID = returnedData.postID;\n                const postLikesArray = returnedData.postLikesArray;\n                console.log(\"postID\")\n                console.log(postID)\n                console.log(\"postLikesArray\")\n                console.log(postLikesArray)  \n                var updatedQueryData = structuredClone(originalQueryData);\n\n                for (let i = 0; i < updatedQueryData.length; i++) {\n                    //console.log(updatedQueryData[i].postID + \" \" + postID)\n                    if(updatedQueryData[i].postID == postID) {\n                        console.log(\"Change this post! \" + postID)\n\n                        \n                        //Create the new array of users who have liked this\n                        updatedQueryData[i].postLikesArray = []\n                        updatedQueryData[i].postLikesArray = returnedData.postLikesArray\n                        updatedQueryData[i].totalLikes = returnedData.postLikesArray.length\n\n\n                    }\n                }\n\n                return updatedQueryData;\n                //return [data];\n            })\n        }\n    })\n\n    return (\n        <div className=\"\">\n            <p className = \"post-text\">total Likes { totalLikes } </p>  \n            <ul> { postLikesArray.map((likedBy) => (\n                <li key = { likedBy}  > { likedBy } </li> \n            ))}</ul>\n            { postLikesArray.includes(currentUser) ? \n                <button type=\"submit\" className = \"post-liked\" onClick={() => { handleLikePost(postID, currentUser) }}>Like</button>: \n                <button type=\"submit\" className = \"\" onClick={() => { handleLikePost(postID, currentUser) }}>Like</button>\n            }\n        </div>\n        );\n    } \n  \nexport default Likes;\n*/\n/*\n//WORKS\nconst Likes = (props) => {\n    const handleLike = props.handleLike;\n    const currentUser = props.currentUser;\n    const post = props.post;\n\n    const totalLikes = props.post.totalLikes;\n    const postLikesArray = props.post.postLikesArray;\n    const postID = props.post.postID;\n\n    return (\n        <div className=\"\">\n            <p className = \"post-text\">total Likes { totalLikes } </p>  \n            <ul> { postLikesArray.map((likedBy) => (\n                <li key = { likedBy}  > { likedBy } </li> \n            ))}</ul>\n            { postLikesArray.includes(currentUser) ? \n                <button type=\"submit\" className = \"post-liked\" onClick={() => { handleLike(post) }}>Like</button>: \n                <button type=\"submit\" className = \"\" onClick={() => { handleLike(post) }}>Like</button>\n            }\n        </div>\n        );\n    } \n  \nexport default Likes;\n*/\n/*\nconst { isLoading, mutate } = useMutation(likePost, {\n    onSuccess: (data) => {\n        queryClient.invalidateQueries(['group', groupID])\n        \n        const newPost = data;\n\n        queryClient.setQueryData(['group', groupID], (oldPostData) => {\n            oldPostData.unshift(newPost);\n\n            return oldPostData;\n        })\n        \n    }\n})\n*/\n\n/*\nconst [youLikedPost, setYouLikedPost] = useState(false);\nYou liked { youLikedPost ? \"yep!\" : \"nope\"} | \n    //Maybe don't need \n    useEffect(() => {\n        if(postLikesArray.includes(currentUser)) {\n            setYouLikedPost(true)\n        } else {\n            setYouLikedPost(false)\n        }   \n    }, [youLikedPost]); \nconsole.log(currentUser)\nconsole.log(postLikesArray)\nconsole.log(postLikesArray.includes(currentUser))\n*/\n\n/*\n\n    /*\n\n\n  for (let i = 0; i < posts.length; i++) {\n    //console.log(posts[i].postID + \" \" + postID)\n    if(posts[i].postID == postID) {\n      if(posts[i].postLikesArray.includes(currentUser)) {\n        console.log(currentUser + \" Had already liked this post so we will unlike! \")\n        const index = posts[i].postLikesArray.indexOf(currentUser);\n        if (index > -1) { \n          posts[i].postLikesArray.splice(index, 1); \n        }\n        posts[i].totalLikes = posts[i].postLikesArray.length\n      } else {\n        console.log(currentUser + \" Liked this post!\")\n        posts[i].postLikesArray.push(currentUser);\n        posts[i].totalLikes = posts[i].postLikesArray.length\n\n      }\n      posts[i].postLikesArray.includes(currentUser)\n    }\n    res.json(posts[i])\n    return \n  } \n\n    \n    const { isLoading, mutate } = useMutation(likePostAPI, {\n        onSuccess: (oldData) => {\n            //queryClient.invalidateQueries(['group', groupID])\n            console.log(oldData)\n        }\n    })\n*/\n//const postID = 5;\n\n//var newData = structuredClone(oldData);\n\n/*\nqueryClient.setQueryData(['group', groupID], (oldPostData) => {\n    return oldPostData;\n})\n */\n//Works\n/*\nqueryClient.setQueryData(['group', groupID], (oldData) => {\n     for (let i = 0; i < oldData.length; i++) {\n        if(posts[i].postID == postID) {\n            console.log(\"updated post \")\n            console.log(posts[i])\n        }      \n    } \n  return newData;  \n})\n*/\n/*\nconst oldObj = {a: {b: 10}};\nconst newObj = {...oldObj};\n  if(posts[i].postLikesArray.includes(currentUser)) {\n    console.log(currentUser + \" Had already liked this post so we will unlike! \")\n    const index = posts[i].postLikesArray.indexOf(currentUser);\n    if (index > -1) { \n      posts[i].postLikesArray.splice(index, 1); \n    }\n    posts[i].totalLikes = posts[i].postLikesArray.length\n                   } else {\n    console.log(currentUser + \" Liked this post!\")\n    posts[i].postLikesArray.push(currentUser);\n    posts[i].totalLikes = posts[i].postLikesArray.length\n                   }\n  posts[i].postLikesArray.includes(currentUser)\n  */\n\n//return oldData;\n\n/*\n    await queryClient.cancelQueries({ queryKey: ['todos', newTodo.id] })\n     // Snapshot the previous value\n    const previousTodo = queryClient.getQueryData(['todos', newTodo.id])\n     // Optimistically update to the new value\n    queryClient.setQueryData(['todos', newTodo.id], newTodo)\n     // Return a context with the previous and new todo\n    return { previousTodo, newTodo }\n queryClient.setQueryData(\n    ['posts', { id }],\n    //this is the way\n    (oldData) => oldData ? {\n        ...oldData,\n        title: 'my new post title'\n    } : oldData\n)\n   */\n/*\nconst newPost = data;\n queryClient.setQueryData(['group', groupID], (oldPostData) => {\n    oldPostData.unshift(newPost);\n     return oldPostData;\n})\n*/\nvar _c;\n$RefreshReg$(_c, \"Likes\");","map":{"version":3,"names":["React","useState","useEffect","useMutation","useQueryClient","axios","LikePost","UnlikePost","api","create","likePostAPI","likedPost","postURL","response","post","data","Likes","props","queryClient","currentUser","console","log","totalLikes","postLikes","postLikesArray","postUserLikesArray","likedByUsernameArray","postID","length","map","postLike","likedByUserName","postLikeID"],"sources":["/Users/david/Desktop/David/www/kite/src/components/posts/actions/like/Likes.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\nimport LikePost from './LikePost';\nimport UnlikePost from './UnlikePost';\n\nconst api = axios.create({\n  \n})\n\nasync function likePostAPI(likedPost) {\n    const postURL = \"http://localhost:3003/post/like\"\n    const response = await axios.post(postURL, likedPost);\n\n    return response.data;\n} \n\n\nconst Likes = (props) => {\n    const queryClient = useQueryClient();\n    const currentUser = props.currentUser;\n    var post = props.post;\n    console.log(post)\n    const totalLikes = props.post.totalLikes;\n    const postLikes = props.post.postLikesArray;\n    const postUserLikesArray = props.post.likedByUsernameArray;\n    const postID = props.post.postID;\n\n    \n    return (     \n        <div className=\"post\" >\n            <p className = \"post-text\">total Likes { postLikes.length } </p>  \n            <ul> { postLikes.map((postLike) => (\n              <li className= \"like-list\" key = { postLike.postLikeID } > { postLike.likedByUserName } </li> \n            ))}</ul>  \n            <LikePost post = { post } currentUser = {currentUser} />\n        </div>       \n        );\n    }  \n\nexport default Likes;\n\n/*\n<Likes post = { post } currentUser = {currentUser}  />   \n<li key = { postLikes.postLikeID }  > { postLikes.likedByName } </li> \n          <ul> { postLikesArray.map((postLikes) => (\n                <li key = { postLikes.likedByName }  > { postLikes.likedByName } </li> \n            ))}</ul>        \n\n<ul> { postLikesArray.map((likedBy) => (\n                <li key = { likedBy}  > { likedBy } </li> \n            ))}</ul>    \n\n\"postLikes\": [\n    {\n        \"postLikeID\": 92,\n        \"postID\": 70,\n        \"likedByName\": \"sam\",\n        \"likedByImage\": \"12.jpg\",\n        \"likedByFirstName\": \"David\",\n        \"likedByLastName\": \"Vasquez\"\n    }\n]*/\n\n\n//FROM SIMPLE\n/*\nimport React, { useState, useEffect } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\nvar groupID = 72;\n\nconst api = axios.create({\n  \n})\n\nasync function likePostAPI(likedPost) {\n    const postURL = \"http://localhost:3003/api/post/like\"\n    const response = await axios.post(postURL, likedPost);\n\n    return response.data;\n} \n\n\nconst Likes = (props) => {\n    const queryClient = useQueryClient();\n    const currentUser = props.currentUser;\n    const post = props.post;\n\n    const totalLikes = props.post.totalLikes;\n    const postLikesArray = props.post.postLikesArray;\n    const postID = props.post.postID;\n    \n\n    const handleLikePost = (postID, currentUser) => {\n        var likedPost = {\n            postID: postID,\n            likedBy: currentUser   \n        }\n\n        mutate(likedPost)\n        //console.log(currentUser + \" you liked \" + postID)\n    }\n    const { isLoading, mutate } = useMutation(likePostAPI, {\n        onSuccess: (returnedData) => {\n            //queryClient.invalidateQueries(['posts'])\n   \n            queryClient.setQueryData(['group', groupID], (originalQueryData) => {\n                console.log(\"returnedData\")\n                console.log(returnedData)\n                console.log(\"originalQueryData\")\n                console.log(originalQueryData)\n\n                //STEP 1: Get post ID of updated post and new like array \n                const postID = returnedData.postID;\n                const postLikesArray = returnedData.postLikesArray;\n                console.log(\"postID\")\n                console.log(postID)\n                console.log(\"postLikesArray\")\n                console.log(postLikesArray)  \n                var updatedQueryData = structuredClone(originalQueryData);\n\n                for (let i = 0; i < updatedQueryData.length; i++) {\n                    //console.log(updatedQueryData[i].postID + \" \" + postID)\n                    if(updatedQueryData[i].postID == postID) {\n                        console.log(\"Change this post! \" + postID)\n\n                        \n                        //Create the new array of users who have liked this\n                        updatedQueryData[i].postLikesArray = []\n                        updatedQueryData[i].postLikesArray = returnedData.postLikesArray\n                        updatedQueryData[i].totalLikes = returnedData.postLikesArray.length\n\n\n                    }\n                }\n\n                return updatedQueryData;\n                //return [data];\n            })\n        }\n    })\n\n    return (\n        <div className=\"\">\n            <p className = \"post-text\">total Likes { totalLikes } </p>  \n            <ul> { postLikesArray.map((likedBy) => (\n                <li key = { likedBy}  > { likedBy } </li> \n            ))}</ul>\n            { postLikesArray.includes(currentUser) ? \n                <button type=\"submit\" className = \"post-liked\" onClick={() => { handleLikePost(postID, currentUser) }}>Like</button>: \n                <button type=\"submit\" className = \"\" onClick={() => { handleLikePost(postID, currentUser) }}>Like</button>\n            }\n        </div>\n        );\n    } \n  \nexport default Likes;\n*/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//CODE\n/*\nimport React, { useState, useEffect } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\nvar groupID = 72;\n\n\nconst api = axios.create({\n  \n})\n\nasync function likePostAPI(likedPost) {\n    const postURL = \"http://localhost:3003/api/post/like\"\n    const response = await axios.post(postURL, likedPost);\n\n    return response.data;\n} \n\n\nconst Likes = (props) => {\n    const queryClient = useQueryClient();\n    const currentUser = props.currentUser;\n    const post = props.post;\n\n    const totalLikes = props.post.totalLikes;\n    const postLikesArray = props.post.postLikesArray;\n    const postID = props.post.postID;\n    \n\n    const handleLikePost = (postID, currentUser) => {\n        var likedPost = {\n            postID: postID,\n            likedBy: currentUser   \n        }\n\n        mutate(likedPost)\n        //console.log(currentUser + \" you liked \" + postID)\n    }\n    const { isLoading, mutate } = useMutation(likePostAPI, {\n        onSuccess: (returnedData) => {\n            //queryClient.invalidateQueries(['posts'])\n   \n            queryClient.setQueryData(['group', groupID], (originalQueryData) => {\n                console.log(\"returnedData\")\n                console.log(returnedData)\n                console.log(\"originalQueryData\")\n                console.log(originalQueryData)\n\n                //STEP 1: Get post ID of updated post and new like array \n                const postID = returnedData.postID;\n                const postLikesArray = returnedData.postLikesArray;\n                console.log(\"postID\")\n                console.log(postID)\n                console.log(\"postLikesArray\")\n                console.log(postLikesArray)  \n                var updatedQueryData = structuredClone(originalQueryData);\n\n                for (let i = 0; i < updatedQueryData.length; i++) {\n                    //console.log(updatedQueryData[i].postID + \" \" + postID)\n                    if(updatedQueryData[i].postID == postID) {\n                        console.log(\"Change this post! \" + postID)\n\n                        \n                        //Create the new array of users who have liked this\n                        updatedQueryData[i].postLikesArray = []\n                        updatedQueryData[i].postLikesArray = returnedData.postLikesArray\n                        updatedQueryData[i].totalLikes = returnedData.postLikesArray.length\n\n\n                    }\n                }\n\n                return updatedQueryData;\n                //return [data];\n            })\n        }\n    })\n\n    return (\n        <div className=\"\">\n            <p className = \"post-text\">total Likes { totalLikes } </p>  \n            <ul> { postLikesArray.map((likedBy) => (\n                <li key = { likedBy}  > { likedBy } </li> \n            ))}</ul>\n            { postLikesArray.includes(currentUser) ? \n                <button type=\"submit\" className = \"post-liked\" onClick={() => { handleLikePost(postID, currentUser) }}>Like</button>: \n                <button type=\"submit\" className = \"\" onClick={() => { handleLikePost(postID, currentUser) }}>Like</button>\n            }\n        </div>\n        );\n    } \n  \nexport default Likes;\n*/\n/*\n//WORKS\nconst Likes = (props) => {\n    const handleLike = props.handleLike;\n    const currentUser = props.currentUser;\n    const post = props.post;\n\n    const totalLikes = props.post.totalLikes;\n    const postLikesArray = props.post.postLikesArray;\n    const postID = props.post.postID;\n\n    return (\n        <div className=\"\">\n            <p className = \"post-text\">total Likes { totalLikes } </p>  \n            <ul> { postLikesArray.map((likedBy) => (\n                <li key = { likedBy}  > { likedBy } </li> \n            ))}</ul>\n            { postLikesArray.includes(currentUser) ? \n                <button type=\"submit\" className = \"post-liked\" onClick={() => { handleLike(post) }}>Like</button>: \n                <button type=\"submit\" className = \"\" onClick={() => { handleLike(post) }}>Like</button>\n            }\n        </div>\n        );\n    } \n  \nexport default Likes;\n*/\n/*\nconst { isLoading, mutate } = useMutation(likePost, {\n    onSuccess: (data) => {\n        queryClient.invalidateQueries(['group', groupID])\n        \n        const newPost = data;\n\n        queryClient.setQueryData(['group', groupID], (oldPostData) => {\n            oldPostData.unshift(newPost);\n\n            return oldPostData;\n        })\n        \n    }\n})\n*/\n\n\n/*\nconst [youLikedPost, setYouLikedPost] = useState(false);\nYou liked { youLikedPost ? \"yep!\" : \"nope\"} | \n    //Maybe don't need \n    useEffect(() => {\n        if(postLikesArray.includes(currentUser)) {\n            setYouLikedPost(true)\n        } else {\n            setYouLikedPost(false)\n        }   \n    }, [youLikedPost]); \nconsole.log(currentUser)\nconsole.log(postLikesArray)\nconsole.log(postLikesArray.includes(currentUser))\n*/\n\n/*\n\n    /*\n\n\n  for (let i = 0; i < posts.length; i++) {\n    //console.log(posts[i].postID + \" \" + postID)\n    if(posts[i].postID == postID) {\n      if(posts[i].postLikesArray.includes(currentUser)) {\n        console.log(currentUser + \" Had already liked this post so we will unlike! \")\n        const index = posts[i].postLikesArray.indexOf(currentUser);\n        if (index > -1) { \n          posts[i].postLikesArray.splice(index, 1); \n        }\n        posts[i].totalLikes = posts[i].postLikesArray.length\n      } else {\n        console.log(currentUser + \" Liked this post!\")\n        posts[i].postLikesArray.push(currentUser);\n        posts[i].totalLikes = posts[i].postLikesArray.length\n\n      }\n      posts[i].postLikesArray.includes(currentUser)\n    }\n    res.json(posts[i])\n    return \n  } \n\n    \n    const { isLoading, mutate } = useMutation(likePostAPI, {\n        onSuccess: (oldData) => {\n            //queryClient.invalidateQueries(['group', groupID])\n            console.log(oldData)\n        }\n    })\n*/\n            //const postID = 5;\n\n            //var newData = structuredClone(oldData);\n            \n            /*\n            queryClient.setQueryData(['group', groupID], (oldPostData) => {\n                return oldPostData;\n            })\n\n            */\n            //Works\n            /*\n            queryClient.setQueryData(['group', groupID], (oldData) => {\n\n                for (let i = 0; i < oldData.length; i++) {\n                    if(posts[i].postID == postID) {\n                        console.log(\"updated post \")\n                        console.log(posts[i])\n                    }      \n                } \n              return newData;  \n            })\n            */\n                    /*\n                    const oldObj = {a: {b: 10}};\n                    const newObj = {...oldObj};\n                      if(posts[i].postLikesArray.includes(currentUser)) {\n                        console.log(currentUser + \" Had already liked this post so we will unlike! \")\n                        const index = posts[i].postLikesArray.indexOf(currentUser);\n                        if (index > -1) { \n                          posts[i].postLikesArray.splice(index, 1); \n                        }\n                        posts[i].totalLikes = posts[i].postLikesArray.length\n                \n                      } else {\n                        console.log(currentUser + \" Liked this post!\")\n                        posts[i].postLikesArray.push(currentUser);\n                        posts[i].totalLikes = posts[i].postLikesArray.length\n                \n                      }\n                      posts[i].postLikesArray.includes(currentUser)\n                      */\n                    \n\n                //return oldData;\n      \n            \n\n            /*\n                await queryClient.cancelQueries({ queryKey: ['todos', newTodo.id] })\n\n                // Snapshot the previous value\n                const previousTodo = queryClient.getQueryData(['todos', newTodo.id])\n\n                // Optimistically update to the new value\n                queryClient.setQueryData(['todos', newTodo.id], newTodo)\n\n                // Return a context with the previous and new todo\n                return { previousTodo, newTodo }\n\n            queryClient.setQueryData(\n                ['posts', { id }],\n                //this is the way\n                (oldData) => oldData ? {\n                    ...oldData,\n                    title: 'my new post title'\n                } : oldData\n            )\n\n              */\n            /*\n            const newPost = data;\n\n            queryClient.setQueryData(['group', groupID], (oldPostData) => {\n                oldPostData.unshift(newPost);\n\n                return oldPostData;\n            })\n            */\n        \n    \n\n\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,cAAc,QAAQ,aAAa;AACzD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,UAAU,MAAM,cAAc;AAAC;AAEtC,MAAMC,GAAG,GAAGH,KAAK,CAACI,MAAM,CAAC,CAEzB,CAAC,CAAC;AAEF,eAAeC,WAAW,CAACC,SAAS,EAAE;EAClC,MAAMC,OAAO,GAAG,iCAAiC;EACjD,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,IAAI,CAACF,OAAO,EAAED,SAAS,CAAC;EAErD,OAAOE,QAAQ,CAACE,IAAI;AACxB;AAGA,MAAMC,KAAK,GAAIC,KAAK,IAAK;EAAA;EACrB,MAAMC,WAAW,GAAGd,cAAc,EAAE;EACpC,MAAMe,WAAW,GAAGF,KAAK,CAACE,WAAW;EACrC,IAAIL,IAAI,GAAGG,KAAK,CAACH,IAAI;EACrBM,OAAO,CAACC,GAAG,CAACP,IAAI,CAAC;EACjB,MAAMQ,UAAU,GAAGL,KAAK,CAACH,IAAI,CAACQ,UAAU;EACxC,MAAMC,SAAS,GAAGN,KAAK,CAACH,IAAI,CAACU,cAAc;EAC3C,MAAMC,kBAAkB,GAAGR,KAAK,CAACH,IAAI,CAACY,oBAAoB;EAC1D,MAAMC,MAAM,GAAGV,KAAK,CAACH,IAAI,CAACa,MAAM;EAGhC,oBACI;IAAK,SAAS,EAAC,MAAM;IAAA,wBACjB;MAAG,SAAS,EAAG,WAAW;MAAA,WAAC,cAAY,EAAEJ,SAAS,CAACK,MAAM,EAAE,GAAC;IAAA;MAAA;MAAA;MAAA;IAAA,QAAI,eAChE;MAAA,WAAI,GAAC,EAAEL,SAAS,CAACM,GAAG,CAAEC,QAAQ,iBAC5B;QAAI,SAAS,EAAE,WAAW;QAAA,WAAgC,GAAC,EAAEA,QAAQ,CAACC,eAAe,EAAE,GAAC;MAAA,GAArDD,QAAQ,CAACE,UAAU;QAAA;QAAA;QAAA;MAAA,QACvD,CAAC;IAAA;MAAA;MAAA;MAAA;IAAA,QAAM,eACR,QAAC,QAAQ;MAAC,IAAI,EAAKlB,IAAM;MAAC,WAAW,EAAIK;IAAY;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QACtD;AAEV,CAAC;AAAA,GApBCH,KAAK;EAAA,QACaZ,cAAc;AAAA;AAAA,KADhCY,KAAK;AAsBX,eAAeA,KAAK;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACY;;AAEA;;AAEA;AACZ;AACA;AACA;AACA;AAEY;AACA;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAKgB;;AAIJ;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAMY;AACZ;AACA;AACA;AACA;AACA;AACA;AANY;AAAA"},"metadata":{},"sourceType":"module"}