{"ast":null,"code":"var _jsxFileName = \"/Users/david/Desktop/David/www/kite/src/components/friends/actions/AddFriend.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios';\n\n//PART 1: API Call\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nasync function addFriendAPI(api, addFriend) {\n  console.log(\"addFriend\");\n  console.log(addFriend);\n  console.log(\"addFriend\");\n  const addFriendURL = \"http://localhost:3003/friend/request/\";\n  const response = await api.post(addFriendURL, addFriend);\n  //console.log(response.data)\n\n  return response.data;\n}\n\n//COMPONENT: Add Friend \nconst AddFriend = _ref => {\n  _s();\n  let {\n    api,\n    currentUser,\n    friend\n  } = _ref;\n  const queryClient = useQueryClient();\n\n  //Button: Add a Friend on Button Click \n  const handleAddFriend = (api, currentUser, friend) => {\n    //console.log(currentUser + \" wants to add \" + friend.friendName + \" as a friend!\")\n    var addFriend = {\n      masterSite: \"kite\",\n      currentUser: currentUser,\n      addFriendName: friend\n    };\n    console.log(\"addFriend\");\n    console.log(addFriend);\n    console.log(\"addFriend\");\n    mutate(api, addFriend);\n  };\n\n  //Action: Use React Query to make call\n  const {\n    isLoading,\n    mutate\n  } = useMutation(addFriendAPI, {\n    onSuccess: returnedData => {\n      queryClient.setQueryData(['all-users'], originalQueryData => {\n        console.log();\n        console.log(returnedData);\n        var updatedQueryData = structuredClone(originalQueryData);\n\n        /*\n            //STEP 1: Get post ID of updated post and new like array \n            var updatedQueryData = structuredClone(originalQueryData);\n            const postID = returnedData.postID;\n            const currentUser = returnedData.currentUser;\n                     for (let i = 0; i < updatedQueryData.length; i++) {\n                         if(updatedQueryData[i].postID == postID) {\n                             var postLike = returnedData.newLike[0];\n                             //Create the new array of users who have liked this\n                    updatedQueryData[i].postLikesArray.push(postLike)\n                    updatedQueryData[i].simpleLikesArray.push(currentUser)\n                    updatedQueryData[i].totalLikes = updatedQueryData[i].simpleLikesArray.length\n                         }\n            }\n                 return updatedQueryData;\n            */\n        return updatedQueryData;\n      });\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"\",\n    children: /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      className: \"\",\n      onClick: () => {\n        handleAddFriend(api, currentUser, friend);\n      },\n      children: \"Add a Friend!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n_s(AddFriend, \"sG6dR2SYHBppzfZZ0/U+hBJTR78=\", false, function () {\n  return [useQueryClient, useMutation];\n});\n_c = AddFriend;\nexport default AddFriend;\n\n//RESPONSE\n/*\n*/\n\n//WORKS NO REACT QUERY\n/*\nimport React from 'react';\n//import { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\n//PART 1: API Call\nasync function addFriendAPI(api, currentUser, friend) {\n    const addFriendURL = \"http://localhost:3003/friend/request/\"\n    \n    const addFriendBody = {\n        \"masterSite\": \"kite\",\n        \"currentUser\": currentUser,\n        \"addFriendName\": friend.friendName           \n    }\n\n    //console.log(addFriendBody)\n    \n    //const response = await axios.post(postURL, likedPost);\n    const response = await api.post(addFriendURL, addFriendBody);\n    console.log(response.data)\n  \n    return response.data;\n} \n\n\n\nconst handleAddFriend = (api, currentUser, friend) => {\n    console.log(currentUser + \" wants to add \" + friend.friendName + \" as a friend!\")\n    addFriendAPI(api, currentUser, friend)\n    /*\n    var likedPost = {\n        postID: postID,\n        currentUser: currentUser,\n        groupID: groupID\n    }\n    */\n/*\n //mutate(likedPost)\n}\nconst AddFriend = ({api, currentUser, friend}) => {\n return (     \n     <div className=\"\" >\n         <button type=\"submit\" className = \"\" onClick={() => { handleAddFriend(api, currentUser, friend) }}>Add a Friend!</button>\n     </div>       \n     );\n }  \nexport default AddFriend;\n*/\n\n//EXAMPLE\n\n/*\nimport React, { useState } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\nconst api = axios.create({\n\n})\n\nasync function likePostAPI(likedPost) {\n  const postURL = \"http://localhost:3003/post/like\"\n  const response = await axios.post(postURL, likedPost);\n  console.log(response.data)\n\n  return response.data;\n} \n\n\nfunction LikePost({groupID, post, currentUser}) {\n  const queryClient = useQueryClient();\n  const postUserLikesArray = post.likedByUsernameArray;\n  const postID = post.postID;\n\n\n  const handleLikePost = (postID, currentUser) => {\n    var likedPost = {\n        postID: postID,\n        currentUser: currentUser,\n        groupID: groupID\n    }\n\n    mutate(likedPost)\n\n  }\n\n  const { isLoading, mutate } = useMutation(likePostAPI, {\n    onSuccess: (returnedData) => {\n      queryClient.setQueryData(['group-posts', groupID], (originalQueryData) => {\n        console.log(returnedData)\n        //STEP 1: Get post ID of updated post and new like array \n        var updatedQueryData = structuredClone(originalQueryData);\n        const postID = returnedData.postID;\n        const currentUser = returnedData.currentUser;\n\n        for (let i = 0; i < updatedQueryData.length; i++) {\n\n            if(updatedQueryData[i].postID == postID) {\n\n                var postLike = returnedData.newLike[0];\n\n                //Create the new array of users who have liked this\n                updatedQueryData[i].postLikesArray.push(postLike)\n                updatedQueryData[i].simpleLikesArray.push(currentUser)\n                updatedQueryData[i].totalLikes = updatedQueryData[i].simpleLikesArray.length\n\n            }\n        }\n\n            return updatedQueryData;\n\n        })\n            \n    }\n  })\n\n  return (\n    <div className=\"\">\n        <button type=\"submit\" className = \"\" onClick={() => { handleLikePost(postID, currentUser) }}>Like Me</button>\n    </div>\n  );\n}\n\n\nexport default LikePost;\n\n*/\nvar _c;\n$RefreshReg$(_c, \"AddFriend\");","map":{"version":3,"names":["React","useMutation","useQueryClient","axios","addFriendAPI","api","addFriend","console","log","addFriendURL","response","post","data","AddFriend","currentUser","friend","queryClient","handleAddFriend","masterSite","addFriendName","mutate","isLoading","onSuccess","returnedData","setQueryData","originalQueryData","updatedQueryData","structuredClone"],"sources":["/Users/david/Desktop/David/www/kite/src/components/friends/actions/AddFriend.js"],"sourcesContent":["import React from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\n//PART 1: API Call\nasync function addFriendAPI(api, addFriend) {\n    console.log(\"addFriend\")\n    console.log(addFriend)\n    console.log(\"addFriend\")\n    const addFriendURL = \"http://localhost:3003/friend/request/\"\n    const response = await api.post(addFriendURL, addFriend);\n    //console.log(response.data)\n  \n    return response.data;\n} \n\n//COMPONENT: Add Friend \nconst AddFriend = ({api, currentUser, friend}) => {\n    const queryClient = useQueryClient();\n\n    //Button: Add a Friend on Button Click \n    const handleAddFriend = (api, currentUser, friend) => {\n        //console.log(currentUser + \" wants to add \" + friend.friendName + \" as a friend!\")\n        var addFriend = {\n            masterSite: \"kite\",\n            currentUser: currentUser,\n            addFriendName: friend\n        }\n        console.log(\"addFriend\")\n        console.log(addFriend)\n        console.log(\"addFriend\")\n        \n        mutate(api, addFriend)\n    }\n\n    //Action: Use React Query to make call\n    const { isLoading, mutate } = useMutation(addFriendAPI, {\n        onSuccess: (returnedData) => {\n          queryClient.setQueryData(['all-users'], (originalQueryData) => {\n            console.log( )\n            console.log(returnedData)\n            var updatedQueryData = structuredClone(originalQueryData);\n            \n            /*\n                //STEP 1: Get post ID of updated post and new like array \n                var updatedQueryData = structuredClone(originalQueryData);\n                const postID = returnedData.postID;\n                const currentUser = returnedData.currentUser;\n        \n                for (let i = 0; i < updatedQueryData.length; i++) {\n        \n                    if(updatedQueryData[i].postID == postID) {\n        \n                        var postLike = returnedData.newLike[0];\n        \n                        //Create the new array of users who have liked this\n                        updatedQueryData[i].postLikesArray.push(postLike)\n                        updatedQueryData[i].simpleLikesArray.push(currentUser)\n                        updatedQueryData[i].totalLikes = updatedQueryData[i].simpleLikesArray.length\n        \n                    }\n                }\n    \n                return updatedQueryData;\n                */\n                return updatedQueryData;\n    \n            })\n                \n        }\n      })\n\n    return (     \n        <div className=\"\" >\n            <button type=\"submit\" className = \"\" onClick={() => { handleAddFriend(api, currentUser, friend) }}>Add a Friend!</button>\n        </div>       \n        );\n    }  \n\nexport default AddFriend;\n\n//RESPONSE\n/*\n*/\n\n//WORKS NO REACT QUERY\n/*\nimport React from 'react';\n//import { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\n//PART 1: API Call\nasync function addFriendAPI(api, currentUser, friend) {\n    const addFriendURL = \"http://localhost:3003/friend/request/\"\n    \n    const addFriendBody = {\n        \"masterSite\": \"kite\",\n        \"currentUser\": currentUser,\n        \"addFriendName\": friend.friendName           \n    }\n\n    //console.log(addFriendBody)\n    \n    //const response = await axios.post(postURL, likedPost);\n    const response = await api.post(addFriendURL, addFriendBody);\n    console.log(response.data)\n  \n    return response.data;\n} \n\n\n\nconst handleAddFriend = (api, currentUser, friend) => {\n    console.log(currentUser + \" wants to add \" + friend.friendName + \" as a friend!\")\n    addFriendAPI(api, currentUser, friend)\n    /*\n    var likedPost = {\n        postID: postID,\n        currentUser: currentUser,\n        groupID: groupID\n    }\n    */\n   /*\n    //mutate(likedPost)\n\n}\n\n\nconst AddFriend = ({api, currentUser, friend}) => {\n    return (     \n        <div className=\"\" >\n            <button type=\"submit\" className = \"\" onClick={() => { handleAddFriend(api, currentUser, friend) }}>Add a Friend!</button>\n        </div>       \n        );\n    }  \n\nexport default AddFriend;\n*/\n\n//EXAMPLE\n\n/*\nimport React, { useState } from 'react';\nimport { useMutation, useQueryClient } from \"react-query\";\nimport axios from 'axios'\n\nconst api = axios.create({\n\n})\n\nasync function likePostAPI(likedPost) {\n  const postURL = \"http://localhost:3003/post/like\"\n  const response = await axios.post(postURL, likedPost);\n  console.log(response.data)\n\n  return response.data;\n} \n\n\nfunction LikePost({groupID, post, currentUser}) {\n  const queryClient = useQueryClient();\n  const postUserLikesArray = post.likedByUsernameArray;\n  const postID = post.postID;\n\n\n  const handleLikePost = (postID, currentUser) => {\n    var likedPost = {\n        postID: postID,\n        currentUser: currentUser,\n        groupID: groupID\n    }\n\n    mutate(likedPost)\n\n  }\n\n  const { isLoading, mutate } = useMutation(likePostAPI, {\n    onSuccess: (returnedData) => {\n      queryClient.setQueryData(['group-posts', groupID], (originalQueryData) => {\n        console.log(returnedData)\n        //STEP 1: Get post ID of updated post and new like array \n        var updatedQueryData = structuredClone(originalQueryData);\n        const postID = returnedData.postID;\n        const currentUser = returnedData.currentUser;\n\n        for (let i = 0; i < updatedQueryData.length; i++) {\n\n            if(updatedQueryData[i].postID == postID) {\n\n                var postLike = returnedData.newLike[0];\n\n                //Create the new array of users who have liked this\n                updatedQueryData[i].postLikesArray.push(postLike)\n                updatedQueryData[i].simpleLikesArray.push(currentUser)\n                updatedQueryData[i].totalLikes = updatedQueryData[i].simpleLikesArray.length\n\n            }\n        }\n\n            return updatedQueryData;\n\n        })\n            \n    }\n  })\n\n  return (\n    <div className=\"\">\n        <button type=\"submit\" className = \"\" onClick={() => { handleLikePost(postID, currentUser) }}>Like Me</button>\n    </div>\n  );\n}\n\n\nexport default LikePost;\n\n*/"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,EAAEC,cAAc,QAAQ,aAAa;AACzD,OAAOC,KAAK,MAAM,OAAO;;AAEzB;AAAA;AACA,eAAeC,YAAY,CAACC,GAAG,EAAEC,SAAS,EAAE;EACxCC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;EACxBD,OAAO,CAACC,GAAG,CAACF,SAAS,CAAC;EACtBC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;EACxB,MAAMC,YAAY,GAAG,uCAAuC;EAC5D,MAAMC,QAAQ,GAAG,MAAML,GAAG,CAACM,IAAI,CAACF,YAAY,EAAEH,SAAS,CAAC;EACxD;;EAEA,OAAOI,QAAQ,CAACE,IAAI;AACxB;;AAEA;AACA,MAAMC,SAAS,GAAG,QAAgC;EAAA;EAAA,IAA/B;IAACR,GAAG;IAAES,WAAW;IAAEC;EAAM,CAAC;EACzC,MAAMC,WAAW,GAAGd,cAAc,EAAE;;EAEpC;EACA,MAAMe,eAAe,GAAG,CAACZ,GAAG,EAAES,WAAW,EAAEC,MAAM,KAAK;IAClD;IACA,IAAIT,SAAS,GAAG;MACZY,UAAU,EAAE,MAAM;MAClBJ,WAAW,EAAEA,WAAW;MACxBK,aAAa,EAAEJ;IACnB,CAAC;IACDR,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;IACxBD,OAAO,CAACC,GAAG,CAACF,SAAS,CAAC;IACtBC,OAAO,CAACC,GAAG,CAAC,WAAW,CAAC;IAExBY,MAAM,CAACf,GAAG,EAAEC,SAAS,CAAC;EAC1B,CAAC;;EAED;EACA,MAAM;IAAEe,SAAS;IAAED;EAAO,CAAC,GAAGnB,WAAW,CAACG,YAAY,EAAE;IACpDkB,SAAS,EAAGC,YAAY,IAAK;MAC3BP,WAAW,CAACQ,YAAY,CAAC,CAAC,WAAW,CAAC,EAAGC,iBAAiB,IAAK;QAC7DlB,OAAO,CAACC,GAAG,EAAG;QACdD,OAAO,CAACC,GAAG,CAACe,YAAY,CAAC;QACzB,IAAIG,gBAAgB,GAAGC,eAAe,CAACF,iBAAiB,CAAC;;QAEzD;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;QAOgB,OAAOC,gBAAgB;MAE3B,CAAC,CAAC;IAEN;EACF,CAAC,CAAC;EAEJ,oBACI;IAAK,SAAS,EAAC,EAAE;IAAA,uBACb;MAAQ,IAAI,EAAC,QAAQ;MAAC,SAAS,EAAG,EAAE;MAAC,OAAO,EAAE,MAAM;QAAET,eAAe,CAACZ,GAAG,EAAES,WAAW,EAAEC,MAAM,CAAC;MAAC,CAAE;MAAA,UAAC;IAAa;MAAA;MAAA;MAAA;IAAA;EAAS;IAAA;IAAA;IAAA;EAAA,QACvH;AAEV,CAAC;AAAA,GA5DCF,SAAS;EAAA,QACSX,cAAc,EAkBJD,WAAW;AAAA;AAAA,KAnBvCY,SAAS;AA8Df,eAAeA,SAAS;;AAExB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAMA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA3EA;AAAA"},"metadata":{},"sourceType":"module"}